- changeSet:
    id: 1
    author: admin
    changes:
      - createTable:
          tableName: bank_user
          columns:
            - column:
                name: id
                type: bigint
                autoIncrement: true
                constraints:
                  primaryKey: true
            - column:
                name: username
                type: varchar(255)
                constraints:
                  nullable: false
                  unique: true
            - column:
                name: password
                type: varchar(255)
                constraints:
                  nullable: false
      - createTable:
          tableName: role
          columns:
            - column:
                name: id
                type: integer
                autoIncrement: true
                constraints:
                  primaryKey: true
            - column:
                name: name
                type: varchar(255)
                constraints:
                  nullable: false
                  unique: true
      - createTable:
          tableName: user_roles
          columns:
            - column:
                name: user_id
                type: bigint
                constraints:
                  nullable: false
                  foreignKeyName: fk_user_roles_user
                  references: bank_user(id)
            - column:
                name: role_id
                type: integer
                constraints:
                  nullable: false
                  foreignKeyName: fk_user_roles_role
                  references: role(id)
      - createTable:
          tableName: card
          columns:
            - column:
                name: id
                type: bigint
                autoIncrement: true
                constraints:
                  primaryKey: true
            - column:
                name: number
                type: varchar(16)
                constraints:
                  nullable: false
                  unique: true
            - column:
                name: expiry_date
                type: date
                constraints:
                  nullable: false
            - column:
                name: status
                type: varchar(50)
                constraints:
                  nullable: false
            - column:
                name: balance
                type: numeric(15,2)
                constraints:
                  nullable: false
            - column:
                name: user_id
                type: bigint
                constraints:
                  nullable: false
                  foreignKeyName: fk_card_user
                  references: bank_user(id)
      - createTable:
          tableName: request
          columns:
            - column:
                name: id
                type: bigint
                autoIncrement: true
                constraints:
                  primaryKey: true
            - column:
                name: card_id
                type: bigint
                constraints:
                  nullable: false
                  foreignKeyName: fk_request_card
                  references: card(id)
            - column:
                name: description
                type: text
                constraints:
                  nullable: false
      - addUniqueConstraint:
          tableName: request
          columnNames: card_id
          constraintName: unique_card_id